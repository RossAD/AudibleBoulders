<div class="dashboard" ng-controller='DashboardController'>

  <div ng-show="loading" class="spinner">
    <img src="https://d13yacurqjgara.cloudfront.net/users/82092/screenshots/1073359/spinner.gif">
  </div>

  <div ng-show="!loading">
    <div class="dashboardTitle">
      {{dashboard.org_name}} / <a href="{{dashboard.repo_link}}">{{dashboard.repo_name}}</a><a href="#/"><span class="glyphicon glyphicon-circle-arrow-left" title="Go back home"></span></a>
    </div>

    <div class="dashboardBranch">
        {{dashboard.branch}} branch
    </div>

    <div class="dashboardSetupBtn">
      <a href="#/{{dashboard.org_name}}/{{dashboard.repo_name}}/setup"><button type="button" class="btn btn-info btn-sm">Setup instructions</button></a>
    </div>

    <div class="lastCommit">
      Most recent commit at github.com/{{dashboard.org_name}}/{{dashboard.repo_name}}: <span>{{dashboard.last_commit}}</span>
    </div>

    <div class="dashboardUser" ng-repeat="user in users">
      <div ng-class="[users, { upToDate: user.last_pulled_commit === dashboard.last_commit, outOfDate: user.last_pulled_commit !== dashboard.last_commit, notSetUp: user.set_up === 0 }]">
        <div class="dashboardUserCommit">
          <span ng-show="user.last_pulled_commit === dashboard.last_commit" class="status"><span class="glyphicon glyphicon-ok-sign"></span> {{user.name}} has pulled {{dashboard.last_commit}}</span>
          <span ng-show="user.last_pulled_commit !== dashboard.last_commit && user.set_up" class="status"><span class="glyphicon glyphicon-exclamation-sign"></span> {{user.name}} needs to git pull</span>
          <div ng-show="!user.set_up" class="status"><span class="glyphicon glyphicon-exclamation-sign"></span> {{user.name}} needs to set up</div>
        </div>

        <div class="dashboardUserInfo">
          <img class="gitimg" src="{{user.github_avatar}}">
          {{user.name}} - <a href="https://github.com/{{user.git_handle}}">{{user.git_handle}}</a>
        </div>

        <div class="diffs" ng-repeat="diff in user.diffs">
          {{diff.file}} - {{diff.mod_type}} - {{diff.commit_message}}
        </div>
      </div>
    </div>
  </div>

</div>